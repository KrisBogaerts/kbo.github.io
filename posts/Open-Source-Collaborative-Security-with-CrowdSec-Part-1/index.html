<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Open Source &amp; Collaborative Security with CrowdSec Part 1" /><meta property="og:locale" content="en" /><meta name="description" content="There is no future, no past. There is only the present." /><meta property="og:description" content="There is no future, no past. There is only the present." /><link rel="canonical" href="https://krisbogaerts.github.io/posts/Open-Source-Collaborative-Security-with-CrowdSec-Part-1/" /><meta property="og:url" content="https://krisbogaerts.github.io/posts/Open-Source-Collaborative-Security-with-CrowdSec-Part-1/" /><meta property="og:site_name" content="Tech Notes" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-09-14T00:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Open Source &amp; Collaborative Security with CrowdSec Part 1" /><meta name="twitter:site" content="@BogaertsKris" /><meta name="google-site-verification" content="Bqm1xBElDQYV4UH_5yofjQvnHdEITNr58MntJSYMMMI" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-09-17T15:23:10+02:00","datePublished":"2022-09-14T00:00:00+02:00","description":"There is no future, no past. There is only the present.","headline":"Open Source &amp; Collaborative Security with CrowdSec Part 1","mainEntityOfPage":{"@type":"WebPage","@id":"https://krisbogaerts.github.io/posts/Open-Source-Collaborative-Security-with-CrowdSec-Part-1/"},"url":"https://krisbogaerts.github.io/posts/Open-Source-Collaborative-Security-with-CrowdSec-Part-1/"}</script><title>Open Source & Collaborative Security with CrowdSec Part 1 | Tech Notes</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Tech Notes"><meta name="application-name" content="Tech Notes"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7308669807791841" crossorigin="anonymous"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://media-exp1.licdn.com/dms/image/C5603AQELKDvai-z10A/profile-displayphoto-shrink_200_200/0/1633932732690?e=1666828800&v=beta&t=Ro_IDU6cQJuIgWaZrtKoXYIR3pDmRw_yYi1BWfzRN8Y" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Tech Notes</a></div><div class="site-subtitle font-italic">Defensive (Cyber) Security & Smart Home</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/KrisBogaerts" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/BogaertsKris" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Open Source & Collaborative Security with CrowdSec Part 1</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Open Source & Collaborative Security with CrowdSec Part 1</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1663106400" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 14, 2022 </em> </span> <span> Updated <em class="" data-ts="1663420990" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 17, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/BogaertsKris">Kris Bogaerts</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1631 words"> <em>9 min</em> read</span></div></div></div><div class="post-content"><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 500 100'%3E%3C/svg%3E" data-src="https://doc.crowdsec.net/img/crowdsec_logo.png" alt="Open Source &amp; Collaborative Security with CrowdSec" width="500" height="100" data-proofer-ignore></p><h2 id="intro"><span class="mr-2">Intro</span><a href="#intro" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="https://crowdsec.net/">CrowdSec</a> is an open-source and collaborative IPS (Intrusion Prevention System). It leverages local behavior analysis to create a global IP reputation network. Analyze behaviors, respond to attacks &amp; share signals across the community. With CrowdSec, you can set up an intrusion detection system that parses logs, detects and blocks threats, and shares bad actors with the larger CrowdSec community.</p><p>CrowdSec founds on Fail2Ban’s original philosophy but is told to be 60x faster and not just a protection against brute-force attacks. You integrate with NGINX, Traefic,… based on collection packages that contain logic, parsers and actions. These actions can be executed by what is called a bouncer.</p><h2 id="concept"><span class="mr-2">Concept</span><a href="#concept" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>CrowdSec revolves around the following concepts:</p><ul><li>It reads logs (defined via data sources configuration)<li>Those logs are parsed via parsers and eventually enriched<li>Those normalized logs are matched against the scenarios that the user has deployed<li>When a scenario is “triggered”, CrowdSec generates an alert and eventually one or more associated decisions:<ul><li>The alert is mostly traceability and will stay even after the decision expires<li>The decision, is short-lived and tells what action should be taken against the offending IP/range/user…<li>This information (the signal, the associated decisions) is then sent to crowdsec’s Local API and stored in the database.<li>CrowdSec itself does the detection part and stores those decisions. Then, bouncers can “consume” those decisions via the same Local API and apply remediation.</ul></ul><h2 id="crowd-sourced"><span class="mr-2">Crowd Sourced</span><a href="#crowd-sourced" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Whenever the Local API receives an alert with associated decisions, it shares the alert’s meta-information with the central API:</p><ul><li>The source IP address that triggered the alert<li>The scenario that was triggered<li>The timestamp of the attack</ul><p>This data is processed and redistributed to relevant blocklists and all the participants.</p><h2 id="bouncers"><span class="mr-2">Bouncers</span><a href="#bouncers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Bouncers are “standalone software pieces [that are] in charge of acting upon a decision taken by CrowdSec”: block an IP, present a captcha, enforce MFA on a given user, etc. They can either be within the applicative stack, or work out of band</p><p>Bouncers are utilizing the local API](https://docs.crowdsec.net/docs/local_api/intro/) on the CrowdSec agent to get information about an IP.</p><p>Per CrowdSec’s <a href="https://docs.crowdsec.net/docs/getting_started/install_crowdsec/">documentation</a>, it is suggested to install the <a href="https://hub.crowdsec.net/author/crowdsecurity/bouncers/cs-firewall-bouncer">common firewall bouncer</a>.</p><h2 id="data-sources"><span class="mr-2">Data Sources</span><a href="#data-sources" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>To be able to detect things, crowdsec needs to access logs. <a href="https://docs.crowdsec.net/docs/data_sources/intro">DataSources</a> are configured via the acquisition configuration, or specified via the command-line when performing cold logs analysis.</p><p>They can be gathered from Files, Journald, AWS Cloudwatch, Syslog service, docker, Windows Event Log and AWS Kinesis.</p><h2 id="parsers"><span class="mr-2">Parsers</span><a href="#parsers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>A <a href="https://docs.crowdsec.net/docs/parsers/intro">parser</a> is a YAML configuration file that describes how a string must be parsed. A string can be a log line, or a field extracted from a previous parser.</p><h2 id="scenarios"><span class="mr-2">Scenario’s</span><a href="#scenarios" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="https://docs.crowdsec.net/docs/scenarios/intro">Scenario’s</a> are YAML files that allow to detect a specific behavior, usually an attack.</p><p>Scenarios receive events and can produce alerts using the leaky bucket algorithm.</p><h2 id="collections"><span class="mr-2">Collections</span><a href="#collections" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="https://docs.crowdsec.net/docs/collections/intro">Collections</a> are bundle of parsers, scenarios, postoverflows in a package.</p><p>I recommend reading the CrowdSec <a href="https://docs.crowdsec.net/docs/getting_started/install_crowdsec">Documentation</a> for a more detailed overview.</p><p>Too many details to read let’s start with the fun stuff!</p><h1 id="crowdsec-hub-installation">CrowdSec (Hub) Installation</h1><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>curl <span class="nt">-s</span> https://packagecloud.io/install/repositories/crowdsec/crowdsec/script.deb.sh | <span class="nb">sudo </span>bash
</pre></table></code></div></div><p><img data-src="/assets/img/2022-09-14-13-29-10.png" alt="" data-proofer-ignore></p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt <span class="nb">install </span>crowdsec <span class="nt">-y</span>
</pre></table></code></div></div><p><img data-src="/assets/img/2022-09-14-13-31-34.png" alt="" data-proofer-ignore></p><p>CrowdSec is now running. The application lives in the folder \etc\crowdsec using less than 0.5 MBytes of storage.</p><blockquote class="prompt-warning"><div><p>The CrowdSec package is only in charge of the “detection”, and won’t block anything on its own. You need to deploy a bouncer to “apply” decisions.</p></div></blockquote><h2 id="bouncer-installation"><span class="mr-2">Bouncer Installation</span><a href="#bouncer-installation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt <span class="nb">install </span>crowdsec-firewall-bouncer-iptables <span class="nt">-y</span>
</pre></table></code></div></div><p><img data-src="/assets/img/2022-09-14-13-59-37.png" alt="" data-proofer-ignore></p><p>A local API connection is automatically created when installing the CrowdSec hub and the CrowdSec Firewall bounder on the same machine.</p><p>Validate the bouncer connection with:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>cscli bouncers list
</pre></table></code></div></div><p><img data-src="/assets/img/2022-09-14-17-04-29.png" alt="" data-proofer-ignore></p><p>The output of the cscli bouncers list shows that a locally running firewall bouncer is registered.</p><h2 id="installing-scenarios-or-collections"><span class="mr-2">Installing Scenarios or Collections</span><a href="#installing-scenarios-or-collections" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>CrowdSec is not much fun without the right collections or scenarios installed. This test server will be directly exposed to the internet and there’s a high risk of it being hit by drive-by port scanning. We want to detect those and block them. Later in this tech note, we will install Endlessh as SSH tarpit that slowly sends an endless banner and hopefully, we can gather some stats and see CrowdSec in action.</p><p>There is an Endlessh <a href="https://hub.crowdsec.net/author/crowdsecurity/collections/endlessh">collection</a> package available which contains a log parser and supports brute force detection. <a href="/assets/img/2022-09-14-13-29-10.png"></a></p><p>Let’s install this collection on the hub:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>cscli collections <span class="nb">install </span>crowdsecurity/endlessh
<span class="nb">sudo </span>systemctl reload crowdsec
</pre></table></code></div></div><p><img data-src="/assets/img/2022-09-14-19-08-25.png" alt="" data-proofer-ignore></p><p>Check the installed collections:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>cscli collections list
</pre></table></code></div></div><p><img data-src="/assets/img/2022-09-14-19-09-29.png" alt="" data-proofer-ignore></p><p>CrowdSec comes by default with linux and sshd collection package active after installation and we added the Endlessh collection.</p><p>Let’s check the installed scenarios:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>cscli scenarios list
</pre></table></code></div></div><p><img data-src="/assets/img/2022-09-14-19-14-53.png" alt="" data-proofer-ignore></p><p>Let add the <code class="language-plaintext highlighter-rouge">iptables-scan-multi_ports</code> scenario to the list and reload the crowdsec service.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>cscli scenarios <span class="nb">install </span>crowdsecurity/iptables-scan-multi_ports
<span class="nb">sudo </span>systemctl reload crowdsec
</pre></table></code></div></div><p>In addition, let’s make sure we have the latest scenarios and parser installed.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>cscli hub update
<span class="nb">sudo </span>cscli hub upgrade
<span class="nb">sudo </span>systemctl reload crowdsec
</pre></table></code></div></div><p><img data-src="/assets/img/2022-09-14-19-21-01.png" alt="" data-proofer-ignore></p><p>CrowdSec Console</p><p>To be able to enroll your CrowdSec instance in the Console, the first thing you need to do is to sign up by clicking the ‘Subscribe’ button on https://app.crowdsec.net. Once you’ve done that it’s time to enroll agents.</p><p>First, we need to tell the CrowdSec agent to enroll in the console. In the console you will see a message with the command and key to enroll the agent to the console. If you already have an agent installed then use the “Add Instance” button on the top right.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>cscli console enroll &lt;key&gt;
<span class="nb">sudo </span>systemctl restart crowdsec
</pre></table></code></div></div><p>Next you should see an “Instance enroll request” in console, accept and enroll to finish. <img data-src="/assets/img/2022-09-14-19-41-28.png" alt="" data-proofer-ignore></p><h1 id="installing-a-service">Installing a service</h1><p>CrowdSec is all about collecting and sharing threat intelligence, as mentioned want to install endlessh, an ssh tarpit that’s really good at annoying attackers by keeping them busy and wasting their time.</p><h2 id="moving-ssh-to-a-non-standard-port"><span class="mr-2">Moving SSH to a Non-Standard Port</span><a href="#moving-ssh-to-a-non-standard-port" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>First, we need to move our SSH service to e Non-Standard Port to free up port 22 for Endlessh. Because botnets don’t have endless resources, they typically scan just the default SSH port (22).</p><p>To begin, make a backup of your SSH config file from your server with the following command:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo cp</span> /etc/ssh/sshd_config /etc/ssh/sshd_config.bak
</pre></table></code></div></div><p>This file can be used to restore the original settings if something doesn’t work or if you decide to move SSH back to the default port.</p><p>Open the SSH configuration file /etc/ssh/sshd_config using nano or your favorite text editor:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>nano /etc/ssh/sshd_config
</pre></table></code></div></div><p>Locate the line ‘'’Port 22’’’ and Uncomment this line by removing the #, and then change the port to port 2222 on your server:</p><div class="language-text highlighter-rouge"><div class="code-header"> <span data-label-text="Text"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>...
Port 2222
...
</pre></table></code></div></div><blockquote class="prompt-info"><div><p>If your server is using a firewall, such as UFW, make sure you allow traffic to this new port from your management IP address.</p></div></blockquote><p>Restart the SSH service</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>systemctl restart sshd
</pre></table></code></div></div><blockquote class="prompt-warning"><div><p>Do not close your active SSH session unless you have confirmed you can use SSH on the new port. If you can’t connect through the new port, you risk losing access to your server by closing the session. If you cannot connect to your server in a separate terminal session, you can restore your original SSH settings.</p></div></blockquote><p>You can connect to your host with an additional <code class="language-plaintext highlighter-rouge">-p 2222</code> to the SSH command</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ssh root@&lt;your-host&gt; <span class="nt">-p</span> 2222
</pre></table></code></div></div><h3 id="enable-ufw-as-firewall-allow-port-222222-and-enable-logging"><span class="mr-2">Enable UFW as Firewall, allow port 22/2222 and enable logging</span><a href="#enable-ufw-as-firewall-allow-port-222222-and-enable-logging" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>apt-get <span class="nb">install </span>ufw
<span class="nb">sudo </span>ufw allow 2222/tcp
<span class="nb">sudo </span>ufw allow 22/tcp
<span class="nb">sudo </span>ufw <span class="nb">enable
</span>ufw  logging high
</pre></table></code></div></div><h2 id="installing-endlessh"><span class="mr-2">Installing Endlessh</span><a href="#installing-endlessh" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt-get <span class="nt">-y</span> <span class="nb">install </span>endlessh
</pre></table></code></div></div><p><img data-src="/assets/img/2022-09-14-20-04-11.png" alt="" data-proofer-ignore></p><p>By default, endlessh is not permitted to start on privileged ports (&lt; 1024).</p><p>This is how to do it for Debian 11:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>nano /usr/lib/systemd/system/endlessh.service
</pre></table></code></div></div><p>Update the file by removing # at the beginning of the line with AmbientCapabilities=CAP_NET_BIND_SERVICE and adding # to the beginning of the line PrivateUsers=true <img data-src="/assets/img/2022-09-14-20-36-15.png" alt="" data-proofer-ignore></p><p>Next, you will allow Endlessh to run on ports lower than 1024, also referred to as internet domain privileged ports. Set this capability for the Endlessh binary with the setcap command:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>setcap <span class="s1">'cap_net_bind_service=+ep'</span> /usr/bin/endlessh
</pre></table></code></div></div><p>Endlessh needs to be configured to run on port 22 and to log (to /var/log/syslog by default). Create the file /etc/endlessh/config</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>nano /etc/endlessh/config
</pre></table></code></div></div><p>Add the following text</p><div class="language-text highlighter-rouge"><div class="code-header"> <span data-label-text="Text"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>Port 22
Delay 10000
MaxLineLength 32
MaxClients 4096
LogLevel 1
BindFamily 0
</pre></table></code></div></div><p>Re-nable the Endlessh service and restart:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>systemctl <span class="nt">--now</span> <span class="nb">enable </span>endlessh
<span class="nb">sudo </span>systemctl restart endlessh

Check the service status
<span class="sb">```</span>bash
<span class="nb">sudo </span>systemctl status endlessh
</pre></table></code></div></div><p><img data-src="/assets/img/2022-09-14-20-45-35.png" alt="" data-proofer-ignore> You should see the service running on port 22</p><p>Additionally, you can check the port also with:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>netstat <span class="nt">-ltnp</span> | <span class="nb">grep </span>endlessh
</pre></table></code></div></div><h1 id="configure-the-crowdsec-data-source">Configure the CrowdSec Data Source</h1><p>Syslog will be the data source for this host. We can enable the acquisition of Sin the CrowdSec ```acquis.yaml`` file.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>nano /etc/crowdsec/acquis.yaml
</pre></table></code></div></div><div class="language-text highlighter-rouge"><div class="code-header"> <span data-label-text="Text"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre>filenames:
  - /var/log/auth.log
labels:
  type: syslog
---
filenames:
  - /var/log/kern.log
  - /var/log/messages
labels:
  type: syslog
---
filenames:
  - /var/log/syslog
labels:
  type: endlessh
---
</pre></table></code></div></div><h1 id="crowdsec-metrics">CrowdSec Metrics</h1><p>Run <code class="language-plaintext highlighter-rouge">sudo cscli metrics</code>to see the metrics. there should be activity on the parsers as “PARSED”.</p><p><img data-src="/assets/img/2022-09-17-15-16-04.png" alt="" data-proofer-ignore></p><p>It can take some time but you should CrowdSec banning IP addresses when something is trying to connect via SSH.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>cscli decisions list
</pre></table></code></div></div><p><img data-src="/assets/img/2022-09-17-15-18-29.png" alt="" data-proofer-ignore></p><h1 id="crowdsec-commands">CrowdSec Commands</h1><h2 id="how-to-ban-an-ip"><span class="mr-2">How to ban an IP:</span><a href="#how-to-ban-an-ip" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>cscli decisions add <span class="nt">--ip</span> 192.168.0.1
</pre></table></code></div></div><h2 id="how-to-un-ban-an-ip"><span class="mr-2">How to un-ban an IP:</span><a href="#how-to-un-ban-an-ip" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>cscli decisions delete <span class="nt">--ip</span> 192.168.0.1
</pre></table></code></div></div><h1 id="closing">Closing</h1><p>Wow, too much information for one note. This was “Open Source &amp; Collaborative Security with CrowdSec Part 1”.</p><p>In part 2 we will go for a deep dive into the result and how we get more out of it.</p><p>In part 3 we will install CrowdSec on Home Assistant to secure remote access in combination with Cloudflare.</p><p>Good luck!</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/open-source/'>Open Source</a>, <a href='/categories/cybersecurity/'>Cybersecurity</a>, <a href='/categories/ips/'>IPS</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/security/" class="post-tag no-text-decoration" >security</a> <a href="/tags/crowdsec/" class="post-tag no-text-decoration" >crowdsec</a> <a href="/tags/endlessh/" class="post-tag no-text-decoration" >endlessh</a> <a href="/tags/fail2ban/" class="post-tag no-text-decoration" >fail2ban</a> <a href="/tags/debian/" class="post-tag no-text-decoration" >debian</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Open+Source+%26+Collaborative+Security+with+CrowdSec+Part+1+-+Tech+Notes&url=https%3A%2F%2Fkrisbogaerts.github.io%2Fposts%2FOpen-Source-Collaborative-Security-with-CrowdSec-Part-1%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Open+Source+%26+Collaborative+Security+with+CrowdSec+Part+1+-+Tech+Notes&u=https%3A%2F%2Fkrisbogaerts.github.io%2Fposts%2FOpen-Source-Collaborative-Security-with-CrowdSec-Part-1%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fkrisbogaerts.github.io%2Fposts%2FOpen-Source-Collaborative-Security-with-CrowdSec-Part-1%2F&text=Open+Source+%26+Collaborative+Security+with+CrowdSec+Part+1+-+Tech+Notes" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Open-Source-Collaborative-Security-with-CrowdSec-Part-1/">Open Source & Collaborative Security with CrowdSec Part 1</a><li><a href="/posts/How-to-run-Home-Assistant-HassOS-on-MacOS-M1-with-UTM/">How to run Home Assistant OS on MacOS M1 with UTM</a><li><a href="/posts/HomeAssistant-RemoteAccess-with-CloudflareTunnel/">Home Assistant remote access with CloudFlare Tunnel</a><li><a href="/posts/new-blog-with-jekyll-and-chirpy-theme/">New Github Pages blog with Jekyll and the Chirpy theme</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/arm64/">arm64</a> <a class="post-tag" href="/tags/home-assistant/">Home Assistant</a> <a class="post-tag" href="/tags/macbook-pro-m1/">Macbook Pro M1</a> <a class="post-tag" href="/tags/macos/">MacOS</a> <a class="post-tag" href="/tags/writeup/">writeup</a> <a class="post-tag" href="/tags/blog/">blog</a> <a class="post-tag" href="/tags/cloudflare-tunnel/">Cloudflare Tunnel</a> <a class="post-tag" href="/tags/crowdsec/">crowdsec</a> <a class="post-tag" href="/tags/debian/">debian</a> <a class="post-tag" href="/tags/endlessh/">endlessh</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/How-to-run-Home-Assistant-HassOS-on-MacOS-M1-with-UTM/"><div class="card-body"> <em class="small" data-ts="1662760800" data-df="ll" > Sep 10, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to run Home Assistant OS on MacOS M1 with UTM</h3><div class="text-muted small"><p> Testing configuration/add-ons on my Home Assistant production instance comes with a risk. I always used the Home Assistant add-on development container with Visual Studio Code, but today I needed ...</p></div></div></a></div><div class="card"> <a href="/posts/How-to-run-Windows11-on-MacBook-Pro-M1-with-VMware-Fusion/"><div class="card-body"> <em class="small" data-ts="1661810400" data-df="ll" > Aug 30, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How to run Windows 11 on MacBook Pro M1 with VMware Fusion</h3><div class="text-muted small"><p> VMware Fusion Public Tech Preview 22H2 Installing Windows on Macs with M1 and VMware Fusion was not working for me. Something to think about when buying a new MacBook Pro if you depend on virtuali...</p></div></div></a></div><div class="card"> <a href="/posts/HomeAssistant-RemoteAccess-with-CloudflareTunnel/"><div class="card-body"> <em class="small" data-ts="1661724000" data-df="ll" > Aug 29, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Home Assistant remote access with CloudFlare Tunnel</h3><div class="text-muted small"><p> Cloudflare Tunnel Cloudflare Tunnel provides you with a secure way to connect your resources to Cloudflare without a publicly routable IP address. With Tunnel, you do not send traffic to an exter...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/How-to-run-Home-Assistant-HassOS-on-MacOS-M1-with-UTM/" class="btn btn-outline-primary" prompt="Older"><p>How to run Home Assistant OS on MacOS M1 with UTM</p></a><div class="btn btn-outline-primary disabled" prompt="Newer"><p>-</p></div></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://krisbogaerts.github.io/posts/Open-Source-Collaborative-Security-with-CrowdSec-Part-1/'; this.page.identifier = '/posts/Open-Source-Collaborative-Security-with-CrowdSec-Part-1/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://krisbogaerts.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/BogaertsKris">Kris Bogaerts</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/arm64/">arm64</a> <a class="post-tag" href="/tags/home-assistant/">Home Assistant</a> <a class="post-tag" href="/tags/macbook-pro-m1/">Macbook Pro M1</a> <a class="post-tag" href="/tags/macos/">MacOS</a> <a class="post-tag" href="/tags/writeup/">writeup</a> <a class="post-tag" href="/tags/blog/">blog</a> <a class="post-tag" href="/tags/cloudflare-tunnel/">Cloudflare Tunnel</a> <a class="post-tag" href="/tags/crowdsec/">crowdsec</a> <a class="post-tag" href="/tags/debian/">debian</a> <a class="post-tag" href="/tags/endlessh/">endlessh</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-7PW1FQYYNS"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-7PW1FQYYNS'); }); </script>
